<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mingming 依恋关系测评</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 主容器 -->
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="logo">
                <h1>mingming</h1>
                <p data-lang="subtitle">依恋关系测评</p>
            </div>
            <div class="language-toggle">
                <button class="lang-btn active" onclick="setLanguage('zh')" data-lang="zh">中文</button>
                <button class="lang-btn" onclick="setLanguage('en')" data-lang="en">English</button>
            </div>
        </header>

        <!-- 欢迎页面 -->
        <div id="welcome-page" class="page active">
            <div class="welcome-content">
                <h2 data-lang="welcome-title">发现你的依恋风格</h2>
                <p class="subtitle" data-lang="welcome-subtitle">基于科学的ECR-R量表，帮你了解在亲密关系中的真实自己</p>
                
                <div class="feature-cards">
                    <div class="feature-card">
                        <div class="icon">🧠</div>
                        <h3 data-lang="feature1-title">科学专业</h3>
                        <p data-lang="feature1-desc">基于国际认可的ECR-R量表</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">💝</div>
                        <h3 data-lang="feature2-title">深度分析</h3>
                        <p data-lang="feature2-desc">准确识别你的依恋风格</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">🎯</div>
                        <h3 data-lang="feature3-title">精准匹配</h3>
                        <p data-lang="feature3-desc">为你找到最合适的伴侣</p>
                    </div>
                </div>

                <div class="test-info">
                    <h3 data-lang="test-info-title">测评说明</h3>
                    <ul>
                        <li data-lang="test-info-1">测评包含36个问题，基于科学的ECR-R量表，大约需要8-10分钟</li>
                        <li data-lang="test-info-2">请根据你在亲密关系中的一般体验回答，而不仅仅是当前关系</li>
                        <li data-lang="test-info-3">请诚实回答你的真实感受，没有对错之分</li>
                        <li data-lang="test-info-4">所有信息严格保密，仅用于科学研究目的</li>
                        <li class="rating-explanation">评分标准：1=强烈不同意 2=不同意 3=有些不同意 4=既不同意也不反对 5=有些同意 6=同意 7=强烈同意</li>
                    </ul>
                </div>

                <div class="name-input-section">
                    <h3 data-lang="name-input-title">参与者信息</h3>
                    <div class="input-group">
                        <label for="participant-name" data-lang="name-label">姓名：</label>
                        <input type="text" id="participant-name" placeholder="请输入您的姓名" maxlength="50" required oninput="validateNameInput()">
                        <span class="input-hint" data-lang="name-hint">*必填项，用于结果记录和数据分析</span>
                    </div>
                </div>

                <button class="start-btn" onclick="startTest()" data-lang="start-btn" disabled id="start-test-btn">开始测评</button>
            </div>
        </div>

        <!-- 问卷页面 -->
        <div id="questionnaire-page" class="page">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="progress-text" id="progress-text">1 / 6</span>
            </div>

            <div class="questionnaire-content">
                <div class="question-section" id="question-section">
                    <!-- 问题将通过JavaScript动态加载 -->
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev-btn" id="prev-btn" onclick="previousPage()" disabled data-lang="prev-btn">上一页</button>
                    <button class="nav-btn next-btn" id="next-btn" onclick="nextPage()" data-lang="next-btn">下一页</button>
                </div>
            </div>
        </div>

        <!-- 结果页面 -->
        <div id="result-page" class="page">
            <div class="result-content">
                <div class="result-header">
                    <h2 data-lang="result-title">你的依恋风格</h2>
                    <div class="attachment-type" id="attachment-type"></div>
                </div>

                <div class="scores-container">
                    <div class="score-item">
                        <label data-lang="anxiety-label">依恋焦虑</label>
                        <div class="score-bar">
                            <div class="score-fill anxiety-score" id="anxiety-score-bar"></div>
                        </div>
                        <span class="score-value" id="anxiety-score-value"></span>
                    </div>
                    
                    <div class="score-item">
                        <label data-lang="avoidance-label">依恋回避</label>
                        <div class="score-bar">
                            <div class="score-fill avoidance-score" id="avoidance-score-bar"></div>
                        </div>
                        <span class="score-value" id="avoidance-score-value"></span>
                    </div>
                </div>

                <div class="result-description" id="result-description">
                    <!-- 结果描述将通过JavaScript动态加载 -->
                </div>

                <div class="action-buttons">
                    <button class="action-btn primary" onclick="shareResult()" data-lang="share-btn">分享结果</button>
                    <button class="action-btn secondary" onclick="retakeTest()" data-lang="retake-btn">重新测评</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
